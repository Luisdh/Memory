(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,a){e.exports=a(234)},119:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},120:function(e,t,a){},232:function(e,t,a){},234:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(105),l=a.n(o),c=a(7),i=a(25),s=a(107),u=a(10),m=a(11),d=a(13),p=a(12),h=a(14),E=a(236),f=a(238),b=a(237),y=(a(119),a(120),a(235)),g=a(3),v=a(21),O=a.n(v),j=(localStorage.getItem("id"),"http://localhost:5000");function w(e){return e?{type:"AUTH_ERROR",payload:e}:{type:"AUTH_SUCCESS",payload:"Registered!"}}var S=function(e){return r.a.createElement("div",{className:"validate"},r.a.createElement("p",null,e.errors.password))},_=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).basicValidation=function(e){return!e||e.length<6?"Password must be at least 6 characters":null},a.matchValidation=function(e,t){return t.password!==t.confirmPassword?"Passwords must match":null},a.passwordValidation=function(e,t){return a.basicValidation(e)||a.matchValidation(e,t)},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleSubmit",value:function(e){this.props.register(e,this.props.history)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{style:{margin:"0"}},"Register"),r.a.createElement(g.Form,{onSubmit:function(t){return e.handleSubmit(t)}},function(t){var a=t.formState;t.formApi;return r.a.createElement("div",{className:"form"},r.a.createElement(S,{errors:a.errors}),r.a.createElement("p",null,"Password must be 8 characters long"),r.a.createElement("div",{className:"form-fields"},r.a.createElement("label",null,"Full Name"),r.a.createElement(g.Text,{field:"fullname",placeholder:"full name"})),r.a.createElement("div",{className:"form-fields"},r.a.createElement("label",null,"username"),r.a.createElement(g.Text,{field:"username",placeholder:"username"})),r.a.createElement("div",{className:"form-fields"},r.a.createElement("label",null,"email"),r.a.createElement(g.Text,{field:"email",placeholder:"email"})),r.a.createElement("div",{className:"form-fields"},r.a.createElement("label",null,"password"),r.a.createElement(g.Text,{placeholder:"password",field:"password",type:"password",validate:e.passwordValidation,validateOnChange:!0,notify:["confirmPassword"]}),r.a.createElement("code",null,console.log(a.values))),r.a.createElement("div",{className:"form-fields"},r.a.createElement("label",{htmlFor:"notify-confirm-password"},"Confirm password:"),r.a.createElement(g.Text,{placeholder:"confirm password",type:"password",field:"confirmPassword",validate:e.passwordValidation,validateOnChange:!0,notify:["password"]})),r.a.createElement("button",{type:"submit",className:"form-button"},"Sign Up"))}),r.a.createElement("span",{style:{margin:"5px 0"}},"Already registered?",r.a.createElement(y.a,{to:"/login",className:"redirect"}," ","Login")))}}]),t}(n.Component),T=Object(c.b)(function(e){return{message:e.auth.message}},{register:function(e,t){return function(a){O.a.post("".concat(j,"/api/register"),e,{headers:{Authorization:"bearer ".concat(localStorage.getItem("id"))}}).then(function(e){localStorage.setItem("id",e.data.userToken),t.push("/login")}).catch(function(e){console.log(e.response),e.response.data.message?a(w(e.response.data.message)):e.response.data.errmsg&&a(w("email is already in use."))})}}})(_),N=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Welcome"),r.a.createElement("div",{className:"auth_container"},r.a.createElement(y.a,{to:"/login",className:"auth"},"Login"),r.a.createElement(y.a,{to:"register",className:"auth"},"Sign Up")))},R=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleSubmit",value:function(e){this.props.login(e,this.props.history)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("h2",{style:{margin:"0 0 3rem 0"}},"Login"),this.props.error?r.a.createElement("h3",null,this.props.error):null,r.a.createElement(g.Form,{onSubmit:function(t){return e.handleSubmit(t)},className:"form"},r.a.createElement("div",{className:"form-fields"},r.a.createElement("label",null,"username: "),r.a.createElement(g.Text,{field:"username"})),r.a.createElement("div",{className:"form-fields"},r.a.createElement("label",null,"password: "),r.a.createElement(g.Text,{field:"password",type:"password"})),r.a.createElement("button",{type:"submit",className:"form-button"},"Submit")),r.a.createElement("span",null,"Can't log in?",r.a.createElement(y.a,{to:"/register",className:"redirect"}," ","Register")))}}]),t}(n.Component),I=Object(c.b)(function(e){return{success:e.auth.success,error:e.auth.login_error}},{login:function(e,t){return function(a){O.a.post("".concat(j,"/api/login"),e,{headers:{Authorization:"bearer ".concat(localStorage.getItem("id"))}}).then(function(e){localStorage.setItem("id",e.data.userToken),a({type:"USER_LOGIN",payload:e.data.user}),a({type:"USER_ENTRIES",payload:e.data.user.entries}),t.push("/home")}).catch(function(e){console.log("login error",e),a({type:"LOGIN_ERROR",payload:"Wrong username/password"})})}}})(R);O.a.defaults.headers.common.Authorization="bearer ".concat(localStorage.getItem("id"));var k="http://localhost:5000";function C(e){return function(t){O.a.get("".concat(k,"/api/entry/").concat(e),{headers:{Authorization:"bearer ".concat(localStorage.getItem("id"))}}).then(function(e){console.log(e),t({type:"ENTRY",payload:e.data})}).catch(function(e){console.log(e)})}}var A=function(e){return r.a.createElement(y.a,{to:"/entry/".concat(e.id)},r.a.createElement("div",{style:{width:"200px"}},r.a.createElement("p",null,e.title),r.a.createElement("p",null,e.body)))},x=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.allEntries()}},{key:"render",value:function(){var e=this,t=this.props,a=t.entries;t.usersentries;return console.log(a),r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome to the Home page"),r.a.createElement("p",{onClick:function(){return e.props.logout(e.props.history)}},"Log out"),a?a.map(function(e,t){return r.a.createElement(A,{key:t,title:e.title,body:e.content,id:e._id})}):r.a.createElement("p",null," loading"),r.a.createElement(y.a,{to:"/create"},r.a.createElement("p",null,"create")))}}]),t}(n.Component),U=Object(c.b)(function(e){return{entries:e.journal.entries,usersentries:e.auth.user_entries}},{logout:function(e){return function(t){t({type:"USER_LOGOUT",payload:"Logged out"}),localStorage.removeItem("id"),e.push("/")}},allEntries:function(){return function(e){O.a.get("".concat(k,"/api/my_entries"),{headers:{Authorization:"bearer ".concat(localStorage.getItem("id"))}}).then(function(t){e({type:"ENTRIES",payload:t.data})}).catch(function(e){console.log("error",e)})}}})(x),L=Object(c.b)(null,{deleteEntry:function(e,t){return function(a){O.a.delete("".concat(k,"/api/delete_entry/").concat(e),{headers:{Authorization:"bearer ".concat(localStorage.getItem("id"))}}).then(function(e){console.log(e.data),a({type:"DELTE_ENTRY",payload:e.data}),t.push("/home")}).catch(function(e){console.log(e)})}}})(function(e){return r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){return e.deleteEntry(e.id,e.history)}},"X"),r.a.createElement("p",null,e.title),r.a.createElement("p",null,e.label),r.a.createElement("p",null,e.body))}),V=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.oneEntry(e)}},{key:"handleSubmit",value:function(e){this.props.editEntry(e,this.props.history)}},{key:"render",value:function(){var e=this,t=this.props.entry;return console.log(this.props.entry),r.a.createElement("div",null,t?r.a.createElement(g.Form,{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("label",null,"Title"),r.a.createElement(g.Text,{field:"title",initialValue:t.title}),r.a.createElement("label",null,"label"),r.a.createElement(g.Text,{field:"label",initialValue:t.label}),r.a.createElement("label",null,"write something"),r.a.createElement(g.TextArea,{field:"content",initialValue:t.content}),r.a.createElement("button",{type:"submit"},"Finish")):null)}}]),t}(n.Component),z=Object(c.b)(function(e){return{entry:e.journal.entry_view}},{editEntry:function(e,t){return function(a,n){var r=n().journal.entry_view._id;O.a.put("".concat(k,"/api/edit_entry/").concat(r),e,{headers:{Authorization:"bearer ".concat(localStorage.getItem("id"))}}).then(function(e){console.log(e.data),a({type:"EDIT_ENTRY",payload:e.data}),t.push("/entry/".concat(r))})}},oneEntry:C})(V),F=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.match.params.id;this.props.oneEntry(e)}},{key:"render",value:function(){var e=this.props.entry;return console.log(e),r.a.createElement("div",null,e?r.a.createElement("div",null,r.a.createElement(L,{id:e._id,title:e.title,body:e.content,createdOn:e.createdOn,label:e.label,history:this.props.history}),r.a.createElement(y.a,{to:"/edit/".concat(e._id)},"edit")):null," ")}}]),t}(n.Component),Y=Object(c.b)(function(e){return{entry:e.journal.entry_view}},{oneEntry:C})(F),D=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleSubmit",value:function(e){console.log(e),this.props.createEntry(e,this.props.history)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(g.Form,{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("label",null,"Title"),r.a.createElement(g.Text,{field:"title"}),r.a.createElement("label",null,"label"),r.a.createElement(g.Text,{field:"label"}),r.a.createElement("label",null,"write something"),r.a.createElement(g.TextArea,{field:"content"}),r.a.createElement("button",{type:"submit"},"Finish")))}}]),t}(n.Component),P=Object(c.b)(null,{createEntry:function(e,t){return function(a){O.a.post("".concat(k,"/api/create_page"),e,{headers:{Authorization:"bearer ".concat(localStorage.getItem("id"))}}).then(function(e){console.log(e.data),a({type:"CREATE_ENTRY",payload:e.data}),t.push("/home")}).catch(function(e){console.log(e.response)})}}})(D),W=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,null,r.a.createElement(f.a,null,r.a.createElement(b.a,{exact:!0,path:"/",component:N}),r.a.createElement(b.a,{path:"/register",component:T}),r.a.createElement(b.a,{path:"/login",component:I}),r.a.createElement(b.a,{path:"/home",component:U}),r.a.createElement(b.a,{path:"/entry/:id",component:Y}),r.a.createElement(b.a,{path:"/create",component:P}),r.a.createElement(b.a,{path:"/edit/:id",component:z})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=a(16),H={user:[]},M={entries:[]},X=Object(i.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":case"USER_LOGOUT":return Object(G.a)({},e,{user:t.payload});case"USER_ENTRIES":return Object(G.a)({},e,{user_entries:t.payload});case"AUTH_ERROR":return Object(G.a)({},e,{message:t.payload});case"AUTH_SUCCESS":return Object(G.a)({},e,{success:t.payload});case"LOGIN_ERROR":return Object(G.a)({},e,{login_error:t.payload});default:return e}},journal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ENTRIES":return Object(G.a)({},e,{entries:t.payload});case"ENTRY":return Object(G.a)({},e,{entry_view:t.payload});case"CREATE_ENTRY":return Object(G.a)({},e,{entry:t.payload});case"DELETE_ENTRY":var a=e.entries.filter(function(e){return e._id!==t.payload._id});return Object(G.a)({},e,{entries:a});case"EDIT_ENTRY":return Object(G.a)({},e,{entry:"edited ".concat(t.payload)});default:return e}}});a(232);var B=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,J=Object(i.e)(X,B(Object(i.a)(s.a)));l.a.render(r.a.createElement(c.a,{store:J},r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[109,2,1]]]);
//# sourceMappingURL=main.d24162e2.chunk.js.map